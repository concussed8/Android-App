<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
  <title>consult summary</title>
  <style>
/* Ensure the body fills the viewport */
html, body {
  margin: 0;
  padding: 0;
  width: 100vw;
  height: 100vh;
  display: flex;
  flex-direction: column;
  align-items: center;
  background-color: white;
}

/* Prevent landscape mode */
@media screen and (orientation: landscape) {
  body {
    display: none;
  }
}

/* Fixed Header */
.header {
  width: 100%;
  text-align: center;
  font-size: 7vw;
  font-weight: bold;
  font-family: "Courier New", Courier, monospace;
  color: white;
  z-index: 1000;
  padding-top: 5px;
  padding-bottom: 10px;
}

/* ✅ Main Container: Adjustable Size & Position */
.content-container {
  position: relative;
  width: 35%;  /* ✅ Adjustable */
  max-width: 165px; /* ✅ Adjust as needed */
  height: auto; /* ✅ Adjust height manually */
  min-height: 175px; /* ✅ Ensures space for image & input fields */
  background-color: white;
  border: 3px solid black;
  border-radius: 8px;
  margin-top: 5px; /* ✅ Vertical control */
  margin-left: -190px; /* ✅ Manual horizontal control */
  padding: 20px;
  text-align: center;
}


/* ✅ Consult Image */
#consultImage {
  width: 100%;
  max-width: 400px;
  display: block;
  margin: 0 auto;
}

/* ✅ Positioning & Styling for Input Fields */
.input-field {
  position: absolute;
  width: 40px;  /* ✅ Adjustable width */
  height: 20px;  /* ✅ Adjustable height */
  background: white;
  border: 2px solid black; /* ✅ Adjustable thickness */
  text-align: center;
  font-size: 12px; /* ✅ Adjustable font size */
  font-weight: bold;
  color: black;
  cursor: default;
  user-select: none;
  pointer-events: none; /* ✅ Prevents user interaction */
  z-index: 10;
}

/* ✅ TBSA Total Box */
.field8 { 
  width: 80px; /* ✅ Adjustable */
  height: 25px; /* ✅ Adjustable */
  bottom: 15px;
  left: 50%;
  transform: translateX(-50%);
}

/* ✅ Input Field Positions (Modify Manually) */
.field1 { top: 35px; left: 62px; }  /* Head */
.field2 { top: 90px; left: 61px; } /* Chest/Trunk */
.field3 { top: 155px; left: 63px; } /* Groin */
.field4 { top: 114px; left: 18px; }  /* Right Arm */
.field5 { top: 114px; left: 106px; } /* Left Arm */
.field6 { top: 215px; left: 45px; } /* Right Leg */
.field7 { top: 215px; left: 88px; } /* Left Leg */

/* ✅ Navigation Buttons */
.nav-buttons {
  position: absolute;
  bottom: 13px;
  display: flex;
  width: 60vw;
  max-width: 400px;
  justify-content: center;
  align-items: center;
  gap: 100px;
  left: 50%;
  transform: translateX(-50%);
  z-index: 1000;
}

/* ✅ Styling for Navigation Buttons */
.nav-buttons img {
  width: 100px;
  height: 75px;
  cursor: pointer;
  border-radius: 10px;
  opacity: 0.9;
  transition: transform 0.2s ease;
}

/* ✅ Button Press Effect */
.nav-buttons img:active {
  transform: scale(1.1);
}
/* ✅ Step Buttons Container */
.step-buttons {
  position: absolute;
  top: 100px; /* ✅ Adjust vertical position */
  left: 225px; /* ✅ Adjust horizontal position */
  display: flex;
  flex-direction: column; /* ✅ Stack buttons vertically */
  gap: 25px; /* ✅ Space between buttons */
  z-index: 1000; /* ✅ Ensures they stay on top */
}

/* ✅ Individual Step Button Styling */
.step-button {
  position: relative;
  width: 100px;  /* ✅ Button Width */
  height: 50px;  /* ✅ Button Height */
  font-size: 16px;
  font-weight: bold;
  color: white;
  border: none;
  cursor: pointer;
  text-transform: uppercase;
  user-select: none;
  transition: all 0.2s ease-in-out;
  
  /* ✅ Slant Effect */
  transform: skewX(0deg);
  
  /* ✅ Cool Gradient Background for 3D Effect */
  background: linear-gradient(145deg, #4A90E2, #1E5799);
  
  /* ✅ Beveled Edges with Box Shadows */
  box-shadow: -3px 3px 6px rgba(0, 0, 0, 0.4), 3px -3px 6px rgba(255, 255, 255, 0.3);
  
  /* ✅ Border Radius for Soft Edges */
  border-radius: 8px;
}

/* ✅ Button Hover Effect */
.step-button:hover {
  background: linear-gradient(145deg, #1E5799, #4A90E2);
  transform: skewX(-15deg) scale(1.05);
}

/* ✅ Button Active (Click) Effect */
.step-button:active {
  background: linear-gradient(145deg, #003366, #1E5799);
  box-shadow: inset -2px 2px 5px rgba(0, 0, 0, 0.5), inset 2px -2px 5px rgba(255, 255, 255, 0.2);
}
/* ✅ Main Adjustable Container */
.adjustable-container {
  position: absolute; /* ✅ Allows precise manual positioning */
  width: 75%; /* ✅ Adjustable width relative to viewport */
  height: 75% /* ✅ Adjustable height relative to viewport */
  max-width: 300px; /* ✅ Prevents container from getting too large */
  max-height: 280px; /* ✅ Prevents excessive height */
  
  /* ✅ Manual Positioning */
  top: 400px; /* ✅ Adjust vertical position */
  left: 25px; /* ✅ Adjust horizontal position */

  /* ✅ Styling */
  background-color: white; /* ✅ Default container background */
  border: 3px solid black; /* ✅ Visible border */
  border-radius: 10px; /* ✅ Rounded corners */
  padding: 20px; /* ✅ Inner spacing */
  box-shadow: 4px 4px 10px rgba(0, 0, 0, 0.3); /* ✅ Subtle shadow */
  display: flex;
  flex-direction: column; /* ✅ Ensures content stacks inside */
  align-items: center;
  text-align: center;
}

/* ✅ Container Header */
.container-header {
  width: 100%; /* ✅ Stretches across the container */
  padding: 5px 0; /* ✅ Adjust height */
  font-size: 16px; /* ✅ Font size */
  font-family: "Courier New", Courier, monospace; /* ✅ Monospace font */
  font-weight: bold; /* ✅ Bold text */
  color: white; /* ✅ Text color */
  background-color: #0047AB; /* ✅ Blue header background */
  border-bottom: 0px solid black; /* ✅ Bottom border for definition */
  border-radius: 0px 0px 0 0; /* ✅ Rounds only top corners */
  user-select: none; /* ✅ Prevents text selection */
  
  /* ✅ Manual Vertical Control */
  margin-top: -5px; /* ✅ Adjust this value to move the header up/down */
}
/* ✅ Step 1 Popup Styling */
.step1-popup {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  width: 85%; /* ✅ Adjustable width */
  max-width: 500px; /* ✅ Prevents excessive size */
  background: rgba(255, 255, 255, 0.95); /* ✅ Slightly transparent white */
  border: 5px solid black; /* ✅ Bold border */
  border-radius: 10px; /* ✅ Rounded corners */
  padding: 20px;
  text-align: center;
  font-family: "Courier New", Courier, monospace;
  font-size: 18px;
  font-weight: bold;
  color: black;
  box-shadow: 5px 5px 15px rgba(0, 0, 0, 0.5); /* ✅ Shadow effect */
  z-index: 10000; /* ✅ Keeps it above other elements */
  display: none; /* ✅ Hidden by default */
}

/* ✅ Close Button for Step 1 Popup */
.step1-popup .close-popup {
  margin-top: 15px;
  padding: 10px 15px;
  font-size: 16px;
  font-weight: bold;
  background: red; /* ✅ Red for emphasis */
  color: white;
  border: none;
  border-radius: 5px;
  cursor: pointer;
  box-shadow: 2px 2px 5px rgba(0, 0, 0, 0.3);
  transition: all 0.2s ease-in-out;
}

/* ✅ Hover & Click Effects */
.step1-popup .close-popup:hover {
  background: darkred;
}
.step1-popup .close-popup:active {
  transform: scale(0.95);
}

/* ✅ Step 1 Checkbox Styling */
.step1-popup label {
  display: block;
  margin: 8px 0;
  font-size: 18px;
}

/* ✅ Centering Checkboxes */
.step1-popup input[type="checkbox"] {
  transform: scale(1.3); /* ✅ Makes checkboxes larger */
  margin-right: 8px;
}

  </style>
</head>
<body>
<!-- Fixed Header (now controlled by JavaScript) -->
<div class="header"></div>

<!-- Main Container -->
<div class="content-container">
    <!-- Consult Image -->
    <img id="consultImage" src="https://raw.githubusercontent.com/concussed8/Android-App/main/images/consult_tbsa.png" alt="Consult TBSA Image">

    <!-- Input Fields Positioned Over Image -->
    <input type="text" class="input-field field1" value="0">
    <input type="text" class="input-field field2" value="0">
    <input type="text" class="input-field field3" value="0">
    <input type="text" class="input-field field4" value="0">
    <input type="text" class="input-field field5" value="0">
    <input type="text" class="input-field field6" value="0">
    <input type="text" class="input-field field7" value="0">
    
    <!-- TBSA Total Box -->
    <input type="text" class="input-field field8" readonly value="0%">
</div>
<!-- ✅ Step Buttons Container -->
<div class="step-buttons">
    <button class="step-button" id="step1">Step 1</button>
    <button class="step-button" id="step2">Step 2</button>
    <button class="step-button" id="step3">Step 3</button>
    <button class="step-button" id="step4">Step 4</button>
</div>

<!-- ✅ Step 1 Popup -->
<div id="stepPopup1" class="step1-popup"> <!-- ✅ Matches .step1-popup -->
    <p>Does your patient have any % of FULL thickness burns?</p>
    <label><input type="checkbox" name="fullThickness" value="yes"> Yes</label>
    <label><input type="checkbox" name="fullThickness" value="no"> No</label>

    <p>Does your patient have PARTIAL thickness burns greater than or equal to ≥ 10% TBSA?</p>
    <label><input type="checkbox" name="partialThickness" value="yes"> Yes</label>
    <label><input type="checkbox" name="partialThickness" value="no"> No</label>

    <button class="close-popup" onclick="closePopup('stepPopup1')">CLOSE</button>
</div>

<!-- ✅ Step 2 Popup (Fix Naming) -->
<div id="stepPopup2" class="step2-popup"> <!-- ✅ Now Matches .step2-popup -->
    <p>Monitor urinary output and assess foley catheter placement.</p>
    <button class="close-popup" onclick="closePopup('stepPopup2')">CLOSE</button>
</div>

<!-- ✅ Step 3 Popup (Fix Naming) -->
<div id="stepPopup3" class="step3-popup"> <!-- ✅ Now Matches .step3-popup -->
    <p>Conduct a thorough patient assessment including TBSA estimation.</p>
    <button class="close-popup" onclick="closePopup('stepPopup3')">CLOSE</button>
</div>

<!-- ✅ Step 4 Popup (Fix Naming) -->
<div id="stepPopup4" class="step4-popup"> <!-- ✅ Now Matches .step4-popup -->
    <p>Prepare patient for transfer if required. Contact burn center.</p>
    <button class="close-popup" onclick="closePopup('stepPopup4')">CLOSE</button>
</div>


<!-- ✅ Main Adjustable Container -->
<div class="adjustable-container">
    <!-- ✅ Container Header -->
    <div class="container-header">Consult Checklist Completion</div>

    <!-- ✅ Content Area (You can add more elements here) -->
    <p>Step 1:<br>Step 2:<br>Step 3:<br>Step 4:</p>
</div>


<!-- Next & Prev Buttons -->
<div class="nav-buttons">
    <img src="https://raw.githubusercontent.com/concussed8/Android-App/main/images/prev.png" id="prevBtn" alt="Previous">
    <img src="https://raw.githubusercontent.com/concussed8/Android-App/main/images/next.png" id="nextBtn" alt="Next">
</div>

<script>
  // ✅ Function: Retrieve a session cookie value
function getSessionCookie(name) {
    let cookies = document.cookie.split('; ');
    for (let cookie of cookies) {
        let [cookieName, cookieValue] = cookie.split('=');
        if (cookieName === name) {
            return decodeURIComponent(cookieValue);
        }
    }
    return "";
}

// ✅ Function: Update Background Color Based on Burn Type
function updateBackgroundColor() {
    setTimeout(() => {
        let burnType = getSessionCookie("selectedIcon") || "thermal"; // Default to thermal
        let colors = {
            "thermal": "#800000",   // Dark Red
            "chemical": "#90EE90",  // Light Green
            "electrical": "#ADD8E6" // Light Blue
        };

        if (colors[burnType]) {
            document.body.style.backgroundColor = colors[burnType];
        } else {
            console.warn("Unexpected burn type:", burnType);
        }
    }, 200);
}

// ✅ Function: Update Header Title Dynamically
function updateHeaderTitle() {
    let selectedIcon = getSessionCookie("selectedIcon");
    let headerElement = document.querySelector(".header");

    if (selectedIcon && headerElement) {
        headerElement.innerHTML = `<u>${selectedIcon.toUpperCase()} BURN</u><br> Consult Summary`;
    }
}

// ✅ Function: Show Acknowledge Message Before Proceeding
function showMessage(message) {
    let msgBox = document.createElement("div");
    msgBox.id = "messageBox";
    msgBox.innerHTML = `<p>${message}</p>`;
    Object.assign(msgBox.style, {
        position: "absolute",
        top: "16%", left: "50%", transform: "translateX(-50%)",
        width: "82%", maxWidth: "488px",
        background: "rgba(255, 0, 0, 1)", color: "white",
        fontFamily: "Courier New, Courier, monospace",
        fontSize: "26px", fontWeight: "bold",
        border: "6px solid black", borderRadius: "8px",
        textAlign: "center", display: "flex",
        flexDirection: "column", justifyContent: "center",
        alignItems: "center", padding: "20px",
        boxShadow: "0px 4px 10px rgba(0,0,0,0.5)", zIndex: "10000"
    });

    let closeButton = document.createElement("button");
    closeButton.id = "ackButton";
    closeButton.innerText = "ACKNOWLEDGE";
    Object.assign(closeButton.style, {
        padding: "10px 20px", fontSize: "18px", fontWeight: "bold",
        border: "none", borderRadius: "5px", cursor: "pointer",
        background: "white", color: "black",
        boxShadow: "0px 2px 5px rgba(0,0,0,0.3)", marginTop: "20px"
    });

    closeButton.addEventListener("click", function () {
        msgBox.style.display = "none";
        enableNextButton();
    });

    msgBox.appendChild(closeButton);
    document.body.appendChild(msgBox);
}

// ✅ Function: Disable Next Button Initially
function disableNextButton() {
    let nextBtn = document.getElementById("nextBtn");
    if (nextBtn) {
        nextBtn.style.pointerEvents = "none"; // Disable clicks
        nextBtn.style.opacity = "0.5"; // Indicate it's inactive
    }
}

// ✅ Function: Enable Next Button After Acknowledge
function enableNextButton() {
    let nextBtn = document.getElementById("nextBtn");
    if (nextBtn) {
        nextBtn.style.pointerEvents = "auto"; // Enable clicks
        nextBtn.style.opacity = "1"; // Restore visibility
    }
}

// ✅ Function: Handle Previous Button Click (Navigates to Initial Management)
function setupPreviousButton() {
    let prevBtn = document.getElementById("prevBtn");
    if (prevBtn) {
        prevBtn.addEventListener("click", function () {
            console.log("Navigating to Initial Management Page");
            window.location.href = "https://concussed8.github.io/Android-App/pages/initial_management/initial_management.html";
        });
    }
}

// ✅ Function: Handle Next Button Click (Navigates to Parkland Calculation Page)
function setupNextButton() {
    let nextBtn = document.getElementById("nextBtn");
    if (nextBtn) {
        nextBtn.addEventListener("click", function () {
            console.log("Navigating to Next Page: Parkland Calculation");
            window.location.href = "https://concussed8.github.io/Android-App/pages/modified_parkland/parkland.html";
        });
    }
}

// ✅ Function: Prevent Landscape Mode
function checkOrientation() {
    if (window.matchMedia("(orientation: landscape)").matches) {
        document.body.innerHTML = "<div style='display:flex;justify-content:center;align-items:center;height:100vh;font-size:24px;color:red;'>Return to Portrait Mode</div>";
    }
}

// ✅ Step Popup Functions (Place Before Page Load Event Listener)
function openPopup(stepId) {
    document.querySelectorAll(".step-popup").forEach(popup => popup.style.display = "none");
    document.getElementById(stepId).style.display = "flex";
}

function closePopup(stepId) {
    document.getElementById(stepId).style.display = "none";
}

// ✅ Attach Event Listeners to Step Buttons
document.getElementById("step1").addEventListener("click", function () {
    openPopup("stepPopup1");
});
document.getElementById("step2").addEventListener("click", function () {
    openPopup("stepPopup2");
});
document.getElementById("step3").addEventListener("click", function () {
    openPopup("stepPopup3");
});
document.getElementById("step4").addEventListener("click", function () {
    openPopup("stepPopup4");
});

// ✅ Function: Run All Functions When Page Loads
document.addEventListener("DOMContentLoaded", function () {
    updateBackgroundColor();
    updateHeaderTitle();
    disableNextButton();
    setupPreviousButton();
    setupNextButton();
    showMessage("ATTENTION!! DO NOT DELAY TREATMENT! Initial management may occur before TBSA calculation or burn centre consultation.");
});

// ✅ Listen for Orientation Changes
window.addEventListener("resize", checkOrientation);
window.addEventListener("orientationchange", checkOrientation);

</script>

</body>
</html>
