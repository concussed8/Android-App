<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
  <title>consult summary</title>
  <style>
/* Ensure the body fills the viewport */
html, body {
  margin: 0;
  padding: 0;
  width: 100vw;
  height: 100vh;
  display: flex;
  flex-direction: column;
  align-items: center;
  background-color: white;
}

/* Prevent landscape mode */
@media screen and (orientation: landscape) {
  body {
    display: none;
  }
}

/* Fixed Header */
.header {
  width: 100%;
  text-align: center;
  font-size: 7vw;
  font-weight: bold;
  font-family: "Courier New", Courier, monospace;
  color: white;
  z-index: 1000;
  padding-top: 5px;
  padding-bottom: 10px;
}

/* ✅ Main Container: Adjustable Size */
.content-container {
  position: relative;
  width: 25%;  /* ✅ You can adjust this */
  max-width: 122px; /* ✅ Adjust as needed */
  height: auto; /* ✅ Adjust height manually */
  min-height: 150px; /* ✅ Ensures space for image & input fields */
  background-color: white;
  border: 3px solid black;
  border-radius: 8px;
  margin-top: -10px;
  padding: 20px;
  text-align: center;
}

/* ✅ Consult Image */
#consultImage {
  width: 100%;
  max-width: 400px;
  display: block;
  margin: 0 auto;
}

/* ✅ Positioning & Styling for Input Fields */
.input-field {
  position: absolute;
  width: 22%;  /* ✅ Adjustable */
  height: 7%;  /* ✅ Adjustable */
  background: white;
  border: 3px solid black; /* ✅ Adjustable thickness */
  text-align: center;
  font-size: 1em; /* ✅ Adjustable */
  font-weight: bold;
  color: black;
  cursor: default;
  user-select: none;
  pointer-events: none; /* ✅ Prevents user interaction */
  z-index: 10;
}

/* ✅ TBSA Total Box */
.field8 { 
  width: 40%;
  bottom: 5px;
  left: 50%;
  transform: translateX(-50%);
}

/* ✅ Input Field Positions (Modify Manually) */
.field1 { top: 9%; left: 38%; }  /* Head */
.field2 { top: 35%; left: 38%; } /* Chest/Trunk */
.field3 { top: 55%; left: 38%; } /* Groin */
.field4 { top: 38%; left: 5%; }  /* Right Arm */
.field5 { top: 38%; left: 72%; } /* Left Arm */
.field6 { top: 75%; left: 22%; } /* Right Leg */
.field7 { top: 75%; left: 55%; } /* Left Leg */

/* ✅ Navigation Buttons */
.nav-buttons {
  position: absolute;
  bottom: 20px;
  display: flex;
  width: 60vw;
  max-width: 400px;
  justify-content: center;
  align-items: center;
  gap: 100px;
  left: 50%;
  transform: translateX(-50%);
  z-index: 1000;
}

/* ✅ Styling for Navigation Buttons */
.nav-buttons img {
  width: 100px;
  height: 75px;
  cursor: pointer;
  border-radius: 10px;
  opacity: 0.9;
  transition: transform 0.2s ease;
}

/* ✅ Button Press Effect */
.nav-buttons img:active {
  transform: scale(1.1);
}

  </style>
</head>
<body>
<!-- Fixed Header -->
<div class="header">THERMAL BURN Consult Summary</div>

<!-- Main Container -->
<div class="content-container">
    <!-- Consult Image -->
    <img id="consultImage" src="https://raw.githubusercontent.com/concussed8/Android-App/main/images/consult_tbsa.png" alt="Consult TBSA Image">

    <!-- Input Fields Positioned Over Image -->
    <input type="text" class="input-field field1" value="0%">
    <input type="text" class="input-field field2" value="0%">
    <input type="text" class="input-field field3" value="0%">
    <input type="text" class="input-field field4" value="0%">
    <input type="text" class="input-field field5" value="0%">
    <input type="text" class="input-field field6" value="0%">
    <input type="text" class="input-field field7" value="0%">
    
    <!-- TBSA Total Box -->
    <input type="text" class="input-field field8" readonly value="0%">
</div>

<!-- Next & Prev Buttons -->
<div class="nav-buttons">
    <img src="https://raw.githubusercontent.com/concussed8/Android-App/main/images/prev.png" id="prevBtn" alt="Previous">
    <img src="https://raw.githubusercontent.com/concussed8/Android-App/main/images/next.png" id="nextBtn" alt="Next">
</div>

<script>
  // ✅ Function: Retrieve a session cookie value
function getSessionCookie(name) {
    let cookies = document.cookie.split('; ');
    for (let cookie of cookies) {
        let [cookieName, cookieValue] = cookie.split('=');
        if (cookieName === name) {
            return decodeURIComponent(cookieValue);
        }
    }
    return "";
}

// ✅ Function: Update Background Color Based on Burn Type
function updateBackgroundColor() {
    setTimeout(() => {
        let burnType = getSessionCookie("selectedIcon") || "thermal"; // Default to thermal
        let colors = {
            "thermal": "#800000",   // Dark Red
            "chemical": "#90EE90",  // Light Green
            "electrical": "#ADD8E6" // Light Blue
        };

        if (colors[burnType]) {
            document.body.style.backgroundColor = colors[burnType];
        } else {
            console.warn("Unexpected burn type:", burnType);
        }
    }, 200);
}

// ✅ Function: Update Header Title Dynamically
function updateHeaderTitle() {
    let selectedIcon = getSessionCookie("selectedIcon");
    let headerElement = document.querySelector(".header");

    if (selectedIcon && headerElement) {
        headerElement.innerHTML = `<u>${selectedIcon.toUpperCase()} BURN</u><br> Consult Summary`;
    }
}

// ✅ Function: Show Acknowledge Message Before Proceeding
function showMessage(message) {
    let msgBox = document.createElement("div");
    msgBox.id = "messageBox";
    msgBox.innerHTML = `<p>${message}</p>`;
    Object.assign(msgBox.style, {
        position: "absolute",
        top: "16%", left: "50%", transform: "translateX(-50%)",
        width: "82%", maxWidth: "488px",
        background: "rgba(255, 0, 0, 1)", color: "white",
        fontFamily: "Courier New, Courier, monospace",
        fontSize: "26px", fontWeight: "bold",
        border: "6px solid black", borderRadius: "8px",
        textAlign: "center", display: "flex",
        flexDirection: "column", justifyContent: "center",
        alignItems: "center", padding: "20px",
        boxShadow: "0px 4px 10px rgba(0,0,0,0.5)", zIndex: "10000"
    });

    let closeButton = document.createElement("button");
    closeButton.id = "ackButton";
    closeButton.innerText = "ACKNOWLEDGE";
    Object.assign(closeButton.style, {
        padding: "10px 20px", fontSize: "18px", fontWeight: "bold",
        border: "none", borderRadius: "5px", cursor: "pointer",
        background: "white", color: "black",
        boxShadow: "0px 2px 5px rgba(0,0,0,0.3)", marginTop: "20px"
    });

    closeButton.addEventListener("click", function () {
        msgBox.style.display = "none";
        enableNextButton();
    });

    msgBox.appendChild(closeButton);
    document.body.appendChild(msgBox);
}

// ✅ Function: Disable Next Button Initially
function disableNextButton() {
    let nextBtn = document.getElementById("nextBtn");
    if (nextBtn) {
        nextBtn.style.pointerEvents = "none"; // Disable clicks
        nextBtn.style.opacity = "0.5"; // Indicate it's inactive
    }
}

// ✅ Function: Enable Next Button After Acknowledge
function enableNextButton() {
    let nextBtn = document.getElementById("nextBtn");
    if (nextBtn) {
        nextBtn.style.pointerEvents = "auto"; // Enable clicks
        nextBtn.style.opacity = "1"; // Restore visibility
    }
}

// ✅ Function: Handle Previous Button Click (Navigates to Initial Management)
function setupPreviousButton() {
    let prevBtn = document.getElementById("prevBtn");
    if (prevBtn) {
        prevBtn.addEventListener("click", function () {
            console.log("Navigating to Initial Management Page");
            window.location.href = "https://concussed8.github.io/Android-App/pages/initial_management/initial_management.html";
        });
    }
}

// ✅ Function: Handle Next Button Click (Navigates to Parkland Calculation Page)
function setupNextButton() {
    let nextBtn = document.getElementById("nextBtn");
    if (nextBtn) {
        nextBtn.addEventListener("click", function () {
            console.log("Navigating to Next Page: Parkland Calculation");
            window.location.href = "https://concussed8.github.io/Android-App/pages/modified_parkland/parkland.html";
        });
    }
}

// ✅ Function: Prevent Landscape Mode
function checkOrientation() {
    if (window.matchMedia("(orientation: landscape)").matches) {
        document.body.innerHTML = "<div style='display:flex;justify-content:center;align-items:center;height:100vh;font-size:24px;color:red;'>Return to Portrait Mode</div>";
    }
}

// ✅ Function: Run All Functions When Page Loads
document.addEventListener("DOMContentLoaded", function () {
    updateBackgroundColor(); // Set background color dynamically
    updateHeaderTitle(); // Update header text dynamically
    disableNextButton(); // Ensure next button is disabled initially
    setupPreviousButton(); // Allow navigation to Initial Management page
    setupNextButton(); // Next button remains disabled until Acknowledge is clicked
    showMessage("ATTENTION!! DO NOT DELAY TREATMENT! Initial management may occur before TBSA calculation or burn centre consultation.");
});

// ✅ Listen for Orientation Changes
window.addEventListener("resize", checkOrientation);
window.addEventListener("orientationchange", checkOrientation);

</script>

</body>
</html>
