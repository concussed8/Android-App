<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
  <title>consult summary</title>
  <style>
/* Ensure the body fills the viewport */
html, body {
  margin: 0;
  padding: 0;
  width: 100vw;
  height: 100vh;
  display: flex;
  flex-direction: column;
  align-items: center;
  background-color: white;
}

/* Prevent landscape mode */
@media screen and (orientation: landscape) {
  body {
    display: none;
  }
}

/* Fixed Header */
.header {
  width: 100%;
  text-align: center;
  font-size: 7vw;
  font-weight: bold;
  font-family: "Courier New", Courier, monospace;
  color: white;
  z-index: 1000;
  padding-top: 5px;
  padding-bottom: 10px;
}

/* ‚úÖ Main Container: Adjustable Size & Position */
.content-container {
  position: relative;
  width: 35%;  /* ‚úÖ Adjustable */
  max-width: 165px; /* ‚úÖ Adjust as needed */
  height: auto; /* ‚úÖ Adjust height manually */
  min-height: 175px; /* ‚úÖ Ensures space for image & input fields */
  background-color: white;
  border: 3px solid black;
  border-radius: 8px;
  margin-top: 5px; /* ‚úÖ Vertical control */
  margin-left: -190px; /* ‚úÖ Manual horizontal control */
  padding: 20px;
  text-align: center;
}


/* ‚úÖ Consult Image */
#consultImage {
  width: 100%;
  max-width: 400px;
  display: block;
  margin: 0 auto;
}

/* ‚úÖ Positioning & Styling for Input Fields */
.input-field {
  position: absolute;
  width: 40px;  /* ‚úÖ Adjustable width */
  height: 20px;  /* ‚úÖ Adjustable height */
  background: white;
  border: 2px solid black; /* ‚úÖ Adjustable thickness */
  text-align: center;
  font-size: 12px; /* ‚úÖ Adjustable font size */
  font-weight: bold;
  color: black;
  cursor: default;
  user-select: none;
  pointer-events: none; /* ‚úÖ Prevents user interaction */
  z-index: 10;
}

/* ‚úÖ TBSA Total Box */
.field8 { 
  width: 80px; /* ‚úÖ Adjustable */
  height: 25px; /* ‚úÖ Adjustable */
  bottom: 15px;
  left: 50%;
  transform: translateX(-50%);
}

/* ‚úÖ Input Field Positions (Modify Manually) */
.field1 { top: 35px; left: 62px; }  /* Head */
.field2 { top: 90px; left: 61px; } /* Chest/Trunk */
.field3 { top: 155px; left: 63px; } /* Groin */
.field4 { top: 114px; left: 18px; }  /* Right Arm */
.field5 { top: 114px; left: 106px; } /* Left Arm */
.field6 { top: 215px; left: 45px; } /* Right Leg */
.field7 { top: 215px; left: 88px; } /* Left Leg */

/* ‚úÖ Navigation Buttons */
.nav-buttons {
  position: absolute;
  bottom: 13px;
  display: flex;
  width: 60vw;
  max-width: 400px;
  justify-content: center;
  align-items: center;
  gap: 100px;
  left: 50%;
  transform: translateX(-50%);
  z-index: 1000;
}

/* ‚úÖ Styling for Navigation Buttons */
.nav-buttons img {
  width: 100px;
  height: 75px;
  cursor: pointer;
  border-radius: 10px;
  opacity: 0.9;
  transition: transform 0.2s ease;
}

/* ‚úÖ Button Press Effect */
.nav-buttons img:active {
  transform: scale(1.1);
}
/* ‚úÖ Step Buttons Container */
.step-buttons {
  position: absolute;
  top: 100px; /* ‚úÖ Adjust vertical position */
  left: 225px; /* ‚úÖ Adjust horizontal position */
  display: flex;
  flex-direction: column; /* ‚úÖ Stack buttons vertically */
  gap: 25px; /* ‚úÖ Space between buttons */
  z-index: 1000; /* ‚úÖ Ensures they stay on top */
}

/* ‚úÖ Individual Step Button Styling */
.step-button {
  position: relative;
  width: 100px;  /* ‚úÖ Button Width */
  height: 50px;  /* ‚úÖ Button Height */
  font-size: 16px;
  font-weight: bold;
  color: white;
  border: none;
  cursor: pointer;
  text-transform: uppercase;
  user-select: none;
  transition: all 0.2s ease-in-out;
  
  /* ‚úÖ Slant Effect */
  transform: skewX(0deg);
  
  /* ‚úÖ Cool Gradient Background for 3D Effect */
  background: linear-gradient(145deg, #4A90E2, #1E5799);
  
  /* ‚úÖ Beveled Edges with Box Shadows */
  box-shadow: -3px 3px 6px rgba(0, 0, 0, 0.4), 3px -3px 6px rgba(255, 255, 255, 0.3);
  
  /* ‚úÖ Border Radius for Soft Edges */
  border-radius: 8px;
}

/* ‚úÖ Button Hover Effect */
.step-button:hover {
  background: linear-gradient(145deg, #1E5799, #4A90E2);
  transform: skewX(-15deg) scale(1.05);
}

/* ‚úÖ Button Active (Click) Effect */
.step-button:active {
  background: linear-gradient(145deg, #003366, #1E5799);
  box-shadow: inset -2px 2px 5px rgba(0, 0, 0, 0.5), inset 2px -2px 5px rgba(255, 255, 255, 0.2);
}
/* ‚úÖ Main Adjustable Container */
.adjustable-container {
  position: absolute; /* ‚úÖ Allows precise manual positioning */
  width: 75%; /* ‚úÖ Adjustable width relative to viewport */
  height: 75% /* ‚úÖ Adjustable height relative to viewport */
  max-width: 300px; /* ‚úÖ Prevents container from getting too large */
  max-height: 280px; /* ‚úÖ Prevents excessive height */
  
  /* ‚úÖ Manual Positioning */
  top: 400px; /* ‚úÖ Adjust vertical position */
  left: 25px; /* ‚úÖ Adjust horizontal position */

  /* ‚úÖ Styling */
  background-color: white; /* ‚úÖ Default container background */
  border: 3px solid black; /* ‚úÖ Visible border */
  border-radius: 10px; /* ‚úÖ Rounded corners */
  padding: 20px; /* ‚úÖ Inner spacing */
  box-shadow: 4px 4px 10px rgba(0, 0, 0, 0.3); /* ‚úÖ Subtle shadow */
  display: flex;
  flex-direction: column; /* ‚úÖ Ensures content stacks inside */
  align-items: center;
  text-align: center;
}

/* ‚úÖ Container Header */
.container-header {
  width: 100%; /* ‚úÖ Stretches across the container */
  padding: 10px 0; /* ‚úÖ Increased padding for better spacing */
  font-size: 16px; /* ‚úÖ Font size */
  font-family: "Courier New", Courier, monospace; /* ‚úÖ Monospace font */
  font-weight: bold; /* ‚úÖ Bold text */
  color: white; /* ‚úÖ Text color */
  background-color: #0047AB; /* ‚úÖ Blue header background */
  border-bottom: 0px solid black; /* ‚úÖ Bottom border for definition */
  border-radius: 0px 0px 0 0; /* ‚úÖ Rounds only top corners */
  user-select: none; /* ‚úÖ Prevents text selection */
  
  /* ‚úÖ Manual Vertical Control */
  margin-top: -15px; /* ‚úÖ Adjust this value to move the header up/down */
  margin-bottom: 10px; /* ‚úÖ Adds space below the header */
}

/* ‚úÖ Step 1 Popup - Adjusted for Paragraph Alignment */
.step1-popup {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  width: 85%; /* ‚úÖ Adjustable width */
  max-width: 500px; /* ‚úÖ Prevents excessive size */
  background: rgba(255, 255, 255, 1); /* ‚úÖ Slightly transparent white */
  border: 5px solid black; /* ‚úÖ Bold border */
  border-radius: 10px; /* ‚úÖ Rounded corners */
  padding: 20px;
  font-family: "Courier New", Courier, monospace;
  font-size: 18px;
  font-weight: bold;
  color: black;
  box-shadow: 5px 5px 15px rgba(0, 0, 0, 0.5); /* ‚úÖ Shadow effect */
  z-index: 10000; /* ‚úÖ Keeps it above other elements */
  display: none; /* ‚úÖ Hidden by default */

  flex-direction: column; /* ‚úÖ Ensures proper spacing */
  justify-content: space-between; /* ‚úÖ Pushes close button to the bottom */
  align-items: flex-start; /* ‚úÖ Aligns content to the left */
}

/* ‚úÖ Paragraph-Style Question Formatting */
.step1-popup p {
  text-align: left; /* ‚úÖ Aligns questions like a paragraph */
  margin-bottom: 10px; /* ‚úÖ Adds spacing below each question */
  line-height: 1.4; /* ‚úÖ Adjust line spacing */
}

/* ‚úÖ Checkbox Styling - Aligned Under Questions */
.step1-popup label {
  display: block;
  margin: 4px 0 10px 20px; /* ‚úÖ Moves checkboxes under questions */
  font-size: 18px;
}

/* ‚úÖ Checkbox Sizing */
.step1-popup input[type="checkbox"] {
  transform: scale(1.3); /* ‚úÖ Makes checkboxes larger */
  margin-right: 8px;
}

/* ‚úÖ Close Button at the Bottom */
.step1-popup .close-popup {
  width: 60%; /* ‚úÖ Adjustable width */
  max-width: 200px; /* ‚úÖ Prevents excessive size */
  padding: 12px 20px; /* ‚úÖ Adjust button padding */
  font-size: 16px; /* ‚úÖ Adjustable font size */
  font-weight: bold;
  background: red; /* ‚úÖ Red for emphasis */
  color: white;
  border: none;
  border-radius: 5px;
  cursor: pointer;
  box-shadow: 2px 2px 5px rgba(0, 0, 0, 0.3);
  transition: all 0.2s ease-in-out;
  margin-top: 20px; /* ‚úÖ Adds spacing from checkboxes */
  margin-bottom: 15px; /* ‚úÖ Adjustable bottom margin */
  align-self: center; /* ‚úÖ Ensures centering */
}

/* ‚úÖ Close Button Hover & Click Effects */
.step1-popup .close-popup:hover {
  background: darkred;
}
.step1-popup .close-popup:active {
  transform: scale(0.95);
}

/* ‚úÖ Step 2 Popup - Adjusted for Paragraph Alignment */
.step2-popup {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  width: 85%; /* ‚úÖ Adjustable width */
  max-width: 500px; /* ‚úÖ Prevents excessive size */
  background: rgba(255, 255, 255, 1); /* ‚úÖ Slightly transparent white */
  border: 5px solid black; /* ‚úÖ Bold border */
  border-radius: 10px; /* ‚úÖ Rounded corners */
  padding: 20px;
  font-family: "Courier New", Courier, monospace;
  font-size: 18px;
  font-weight: bold;
  color: black;
  box-shadow: 5px 5px 15px rgba(0, 0, 0, 0.5); /* ‚úÖ Shadow effect */
  z-index: 10000; /* ‚úÖ Keeps it above other elements */
  display: none; /* ‚úÖ Hidden by default */
  
  flex-direction: column; /* ‚úÖ Ensures proper spacing */
  justify-content: space-between; /* ‚úÖ Pushes close button to the bottom */
  align-items: flex-start; /* ‚úÖ Aligns content to the left */
}

/* ‚úÖ Paragraph-Style Question Formatting */
.step2-popup p {
  text-align: left; /* ‚úÖ Aligns questions like a paragraph */
  margin-bottom: 10px; /* ‚úÖ Adds spacing below each question */
  line-height: 1.4; /* ‚úÖ Adjust line spacing */
}

/* ‚úÖ Checkbox Styling - Aligned Under Questions */
.step2-popup label {
  display: block;
  margin: 4px 0 10px 20px; /* ‚úÖ Moves checkboxes under questions */
  font-size: 18px;
}

/* ‚úÖ Checkbox Sizing */
.step2-popup input[type="checkbox"] {
  transform: scale(1.3); /* ‚úÖ Makes checkboxes larger */
  margin-right: 8px;
}

/* ‚úÖ Close Button at the Bottom */
.step2-popup .close-popup {
  width: 60%; /* ‚úÖ Adjustable width */
  max-width: 200px; /* ‚úÖ Prevents excessive size */
  padding: 12px 20px; /* ‚úÖ Adjust button padding */
  font-size: 16px; /* ‚úÖ Adjustable font size */
  font-weight: bold;
  background: red; /* ‚úÖ Red for emphasis */
  color: white;
  border: none;
  border-radius: 5px;
  cursor: pointer;
  box-shadow: 2px 2px 5px rgba(0, 0, 0, 0.3);
  transition: all 0.2s ease-in-out;
  margin-top: 20px; /* ‚úÖ Adds spacing from checkboxes */
  margin-bottom: 15px; /* ‚úÖ Adjustable bottom margin */
  align-self: center; /* ‚úÖ Ensures centering */
}

/* ‚úÖ Close Button Hover & Click Effects */
.step2-popup .close-popup:hover {
  background: darkred;
}
.step2-popup .close-popup:active {
  transform: scale(0.95);
}
/* ‚úÖ Step 3 Popup - Adjusted for Paragraph Alignment */
.step3-popup {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  width: 85%; /* ‚úÖ Adjustable width */
  max-width: 500px; /* ‚úÖ Prevents excessive size */
  background: rgba(255, 255, 255, 1); /* ‚úÖ Slightly transparent white */
  border: 5px solid black; /* ‚úÖ Bold border */
  border-radius: 10px; /* ‚úÖ Rounded corners */
  padding: 20px;
  font-family: "Courier New", Courier, monospace;
  font-size: 18px;
  font-weight: bold;
  color: black;
  box-shadow: 5px 5px 15px rgba(0, 0, 0, 0.5); /* ‚úÖ Shadow effect */
  z-index: 10000; /* ‚úÖ Keeps it above other elements */
  display: none; /* ‚úÖ Hidden by default */

  flex-direction: column; /* ‚úÖ Ensures proper spacing */
  justify-content: space-between; /* ‚úÖ Pushes close button to the bottom */
  align-items: flex-start; /* ‚úÖ Aligns content to the left */
}

/* ‚úÖ Paragraph-Style Question Formatting */
.step3-popup p {
  text-align: left; /* ‚úÖ Aligns questions like a paragraph */
  margin-bottom: 10px; /* ‚úÖ Adds spacing below each question */
  line-height: 1.4; /* ‚úÖ Adjust line spacing */
}

/* ‚úÖ Checkbox Styling - Aligned Under Questions */
.step3-popup label {
  display: block;
  margin: 4px 0 10px 20px; /* ‚úÖ Moves checkboxes under questions */
  font-size: 18px;
}

/* ‚úÖ Checkbox Sizing */
.step3-popup input[type="checkbox"] {
  transform: scale(1.3); /* ‚úÖ Makes checkboxes larger */
  margin-right: 8px;
}

/* ‚úÖ Close Button at the Bottom */
.step3-popup .close-popup {
  width: 60%; /* ‚úÖ Adjustable width */
  max-width: 200px; /* ‚úÖ Prevents excessive size */
  padding: 12px 20px; /* ‚úÖ Adjust button padding */
  font-size: 16px; /* ‚úÖ Adjustable font size */
  font-weight: bold;
  background: red; /* ‚úÖ Red for emphasis */
  color: white;
  border: none;
  border-radius: 5px;
  cursor: pointer;
  box-shadow: 2px 2px 5px rgba(0, 0, 0, 0.3);
  transition: all 0.2s ease-in-out;
  margin-top: 20px; /* ‚úÖ Adds spacing from checkboxes */
  margin-bottom: 15px; /* ‚úÖ Adjustable bottom margin */
  align-self: center; /* ‚úÖ Ensures centering */
}

/* ‚úÖ Close Button Hover & Click Effects */
.step3-popup .close-popup:hover {
  background: darkred;
}
.step3-popup .close-popup:active {
  transform: scale(0.95);
}
/* ‚úÖ Step 4 Popup - Ensures Checkboxes Align Properly */
.step4-popup {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  width: 85%; /* ‚úÖ Adjustable width */
  max-width: 500px; /* ‚úÖ Prevents excessive size */
  background: rgba(255, 255, 255, 1); /* ‚úÖ Opaque white background */
  border: 5px solid black; /* ‚úÖ Bold border */
  border-radius: 10px; /* ‚úÖ Rounded corners */
  padding: 20px;
  font-family: "Courier New", Courier, monospace;
  font-size: 14px;
  font-weight: bold;
  color: black;
  box-shadow: 5px 5px 15px rgba(0, 0, 0, 0.5); /* ‚úÖ Shadow effect */
  z-index: 10000; /* ‚úÖ Keeps it above other elements */
  display: none; /* ‚úÖ Hidden by default */
  flex-direction: column;
  justify-content: space-between;
  align-items: flex-start;
}

/* ‚úÖ Properly Aligns Checkbox & Multi-Line Text */
.step4-popup .checkbox-container {
  display: flex;
  align-items: flex-start; /* ‚úÖ Aligns checkbox with first line of text */
  gap: 10px; /* ‚úÖ Adds spacing between checkbox and text */
  margin-bottom: 5px;
}

/* ‚úÖ Increases Checkbox Size & Ensures Alignment */
.step4-popup input[type="checkbox"] {
  margin-top: 3px; /* ‚úÖ Adjusts position slightly */
  transform: scale(1.3); /* ‚úÖ Makes checkboxes larger */
}

/* ‚úÖ Ensures Long Sentences Wrap Correctly */
.step4-popup label {
  display: flex;
  flex: 1; /* ‚úÖ Makes label take remaining space */
  text-align: left;
  line-height: 1.4; /* ‚úÖ Adjusts spacing for readability */
}

/* ‚úÖ Close Button at the Bottom */
.step4-popup .close-popup {
  width: 60%;
  max-width: 200px;
  padding: 12px 20px;
  font-size: 16px;
  font-weight: bold;
  background: red;
  color: white;
  border: none;
  border-radius: 5px;
  cursor: pointer;
  box-shadow: 2px 2px 5px rgba(0, 0, 0, 0.3);
  transition: all 0.2s ease-in-out;
  margin-top: 20px;
  margin-bottom: 15px;
  align-self: center;
}

/* ‚úÖ Close Button Hover & Click Effects */
.step4-popup .close-popup:hover {
  background: darkred;
}
.step4-popup .close-popup:active {
  transform: scale(0.95);
}
/* ‚úÖ Step Item - Keeps Step # and Status Inline */
.step-item {
  display: flex;  /* ‚úÖ Ensures "Step #" and status stay in one line */
  align-items: center; /* ‚úÖ Centers vertically */
  justify-content: flex-start; /* ‚úÖ Left-aligns content */
  font-size: 18px; /* ‚úÖ Adjusts font size */
  font-weight: bold;
  margin-bottom: 2px; /* ‚úÖ Reduce gap between steps */
  white-space: nowrap; /* ‚úÖ Prevents line wrapping */
}

/* ‚úÖ Step Completion Status */
.step-status {
  margin-left: 10px; /* ‚úÖ Keeps space between "Step #" and status */
  font-size: 18px;
  font-weight: bold;
  color: red; /* ‚úÖ Default to "PENDING" */
}



  </style>
</head>
<body>
<!-- Fixed Header (now controlled by JavaScript) -->
<div class="header"></div>

<!-- Main Container -->
<div class="content-container">
    <!-- Consult Image -->
    <img id="consultImage" src="https://raw.githubusercontent.com/concussed8/Android-App/main/images/consult_tbsa.png" alt="Consult TBSA Image">

    <!-- Input Fields Positioned Over Image -->
    <input type="text" class="input-field field1" value="0">
    <input type="text" class="input-field field2" value="0">
    <input type="text" class="input-field field3" value="0">
    <input type="text" class="input-field field4" value="0">
    <input type="text" class="input-field field5" value="0">
    <input type="text" class="input-field field6" value="0">
    <input type="text" class="input-field field7" value="0">
    

    <!-- TBSA Total Box -->
    <input type="text" class="input-field field8" readonly value="0%">
</div>
<!-- ‚úÖ Step Buttons Container -->
<div class="step-buttons">
    <button class="step-button" id="step1">Step 1</button>
    <button class="step-button" id="step2">Step 2</button>
    <button class="step-button" id="step3">Step 3</button>
    <button class="step-button" id="step4">Step 4</button>
</div>

<!-- ‚úÖ Step 1 Popup -->
<div id="stepPopup1" class="step1-popup"> <!-- ‚úÖ Fixed class name (Removed the dot) -->
    <p>Does your patient have any % of FULL thickness burns?</p>
    <label><input type="checkbox" name="fullThickness" value="yes"> Yes</label>
    <label><input type="checkbox" name="fullThickness" value="no"> No</label>

    <p>Does your patient have PARTIAL thickness burns greater than or equal to ‚â• 10% TBSA?</p>
    <label><input type="checkbox" name="partialThickness" value="yes"> Yes</label>
    <label><input type="checkbox" name="partialThickness" value="no"> No</label>

    <button class="close-popup" onclick="closePopup('stepPopup1')">CLOSE</button>
</div>

<!-- ‚úÖ Step 2 Popup -->
<div id="stepPopup2" class="step2-popup"> <!-- ‚úÖ Fixed class name -->
    <p>Does your patient have any deep PARTIAL or FULL thickness burns involving the FACE, HANDS, GENITALIA, FEET, PERINEUM or over any JOINT?</p>
   <label><input type="checkbox" name="sensitive" value="yes"> Yes</label>
    <label><input type="checkbox" name="sensitive" value="no"> No</label>  
  <button class="close-popup" onclick="closePopup('stepPopup2')">CLOSE</button>
</div>

<!-- ‚úÖ Step 3 Popup -->
<div id="stepPopup3" class="step3-popup"> <!-- ‚úÖ Fixed class name -->
    <p>Does your patient have INHALATION injury with any % of deep PARTIAL or FULL thickness burns?</p>
   <label><input type="checkbox" name="inhalation" value="yes"> Yes</label>
    <label><input type="checkbox" name="inhalation" value="no"> No</label>  
  <button class="close-popup" onclick="closePopup('stepPopup3')">CLOSE</button>
</div>

<!-- ‚úÖ Step 4 Popup -->
<div id="stepPopup4" class="step4-popup">
    <p>Does your patient have any of the following HIGH-RISK CONSIDERATIONS?</p>

    <!-- ‚úÖ High-Risk Checkboxes -->
    <div class="checkbox-container">
        <input type="checkbox" name="highRisk" value="age">
        <label>‚â• 50 years of age</label>
    </div>
    <div class="checkbox-container">
        <input type="checkbox" name="highRisk" value="anticoagulated">
        <label>Anticoagulated</label>
    </div>
    <div class="checkbox-container">
        <input type="checkbox" name="highRisk" value="immunosuppressed">
        <label>Immunosuppression</label>
    </div>
    <div class="checkbox-container">
        <input type="checkbox" name="highRisk" value="pregnancy">
        <label>Pregnancy</label>
    </div>
    <div class="checkbox-container">
        <input type="checkbox" name="highRisk" value="diabetes">
        <label>Diabetes</label>
    </div>
    <div class="checkbox-container">
        <input type="checkbox" name="highRisk" value="social_care">
        <label>Patients with burns requiring special social, emotional, or rehabilitation care</label>
    </div>
    <div class="checkbox-container">
        <input type="checkbox" name="highRisk" value="ed_assessment">
        <label>Patients requiring more care based on the assessment of the ED physician</label>
    </div>
    <div class="checkbox-container">
        <input type="checkbox" name="highRisk" value="significant_problems">
        <label>Significant medical problems</label>
    </div>
    <div class="checkbox-container">
        <input type="checkbox" name="highRisk" value="none">
        <label>None</label>
    </div>

    <!-- ‚úÖ Close Button -->
    <button class="close-popup" onclick="closePopup('stepPopup4')">CLOSE</button>
</div>
<!-- ‚úÖ Main Adjustable Container -->
<div class="adjustable-container">
    <!-- ‚úÖ Container Header -->
    <div class="container-header">Consult Checklist Completion</div>

    <!-- ‚úÖ Step Status without Extra Gaps -->
    <div class="step-container">
        <span class="step-item">Step 1: <span id="stepStatus1" class="step-status">PENDING</span></span>
        <span class="step-item">Step 2: <span id="stepStatus2" class="step-status">PENDING</span></span>
        <span class="step-item">Step 3: <span id="stepStatus3" class="step-status">PENDING</span></span>
        <span class="step-item">Step 4: <span id="stepStatus4" class="step-status">PENDING</span></span>
    </div>
</div>

<!-- Next & Prev Buttons -->
<div class="nav-buttons">
    <img src="https://raw.githubusercontent.com/concussed8/Android-App/main/images/prev.png" id="prevBtn" alt="Previous">
    <img src="https://raw.githubusercontent.com/concussed8/Android-App/main/images/next.png" id="nextBtn" alt="Next">
</div>

<script>
// ‚úÖ Function: Retrieve a session cookie value
function getSessionCookie(name) {
    let cookies = document.cookie.split('; ');
    for (let cookie of cookies) {
        let [cookieName, cookieValue] = cookie.split('=');
        if (cookieName === name) {
            return decodeURIComponent(cookieValue);
        }
    }
    return "";
}

// ‚úÖ Function: Set a session cookie with expiration
function setSessionCookie(name, value) {
    document.cookie = `${name}=${encodeURIComponent(value)}; path=/; SameSite=Lax; max-age=86400`; // Expires in 1 day
}

// ‚úÖ Function: Update Background Color Based on Burn Type
function updateBackgroundColor() {
    setTimeout(() => {
        let burnType = getSessionCookie("selectedIcon") || "thermal"; // Default to thermal
        let colors = {
            "thermal": "#800000",
            "chemical": "#90EE90",
            "electrical": "#ADD8E6"
        };

        if (colors[burnType]) {
            document.body.style.backgroundColor = colors[burnType];
        }
    }, 200);
}

// ‚úÖ Function: Update Header Title Dynamically
function updateHeaderTitle() {
    let selectedIcon = getSessionCookie("selectedIcon");
    let headerElement = document.querySelector(".header");

    if (headerElement) {
        if (selectedIcon) {
            headerElement.innerHTML = `<u>${selectedIcon.toUpperCase()} BURN</u><br> Consult Summary`;
        } else {
            headerElement.innerHTML = "<u>THERMAL BURN</u><br> Consult Summary"; // Default if no icon is selected
        }
    }
}

// ‚úÖ Function: Populate Input Fields from Cookies (Fields 1-7)
function populateFieldsFromCookies() {
    console.log("üîç Populating input fields from cookies...");
    let storedTBSA = getSessionCookie("adultTBSA"); // Retrieve TBSA data from cookies

    if (storedTBSA) {
        try {
            let tbsaData = JSON.parse(storedTBSA);
            console.log("‚úÖ Parsed TBSA Data:", tbsaData);

            for (let i = 1; i <= 7; i++) {
                let fieldName = `field${i}`;
                let inputField = document.querySelector(`.input-field.${fieldName}`);

                if (inputField) {
                    let value = tbsaData[fieldName] || "0%"; // Use stored value or default to "0%"
                    console.log(`‚úÖ Updating ${fieldName} with value: ${value}`);
                    inputField.value = value;
                    inputField.readOnly = true; // Ensure it's non-editable
                } else {
                    console.warn(`‚ö†Ô∏è Input field ${fieldName} not found in DOM`);
                }
            }
        } catch (error) {
            console.error("‚ùå Error parsing TBSA cookie:", error);
        }
    } else {
        console.warn("‚ö†Ô∏è No TBSA data found in cookies.");
    }
}

// ‚úÖ Function: Open a step popup
function openPopup(stepId) {
    document.getElementById(stepId).style.display = "block";
}

// ‚úÖ Function: Close a step popup, save checkboxes, and mark completion
function closePopup(stepId, stepNumber) {
    saveStepCheckboxes(stepId);
    updateStepStatus(stepNumber);
    document.getElementById(stepId).style.display = "none";
}

// ‚úÖ Function: Save Checkbox State for a Given Step
function saveStepCheckboxes(stepId) {
    let checkboxes = document.querySelectorAll(`#${stepId} input[type="checkbox"]`);
    let stepData = {};

    checkboxes.forEach(checkbox => {
        stepData[checkbox.name] = checkbox.checked ? "checked" : "unchecked";
    });

    setSessionCookie(stepId, JSON.stringify(stepData)); // ‚úÖ Save the state as a JSON string
}

// ‚úÖ Function: Restore Checkbox State for a Given Step
function restoreStepCheckboxes(stepId) {
    let storedData = getSessionCookie(stepId);
    if (storedData) {
        let stepData = JSON.parse(storedData);
        let checkboxes = document.querySelectorAll(`#${stepId} input[type="checkbox"]`);

        checkboxes.forEach(checkbox => {
            if (stepData[checkbox.name] === "checked") {
                checkbox.checked = true;
            }
        });
    }
}

// ‚úÖ Function: Mark Step as "COMPLETED" or "PENDING"
function updateStepStatus(stepNumber) {
    let stepElement = document.getElementById(`stepStatus${stepNumber}`);
    let checkboxes = document.querySelectorAll(`#stepPopup${stepNumber} input[type="checkbox"]`);
    let isCompleted = Array.from(checkboxes).some(checkbox => checkbox.checked);

    if (stepElement) {
        stepElement.innerText = isCompleted ? "COMPLETED" : "PENDING";
        stepElement.style.color = isCompleted ? "darkgreen" : "red";
        stepElement.style.fontWeight = "bold";
    }
}

// ‚úÖ Function: Disable Next Button Initially
function disableNextButton() {
    let nextBtn = document.getElementById("nextBtn");
    if (nextBtn) {
        nextBtn.style.pointerEvents = "none";
        nextBtn.style.opacity = "0.5";
    }
}

// ‚úÖ Function: Enable Next Button After Acknowledge
function enableNextButton() {
    let nextBtn = document.getElementById("nextBtn");
    if (nextBtn) {
        nextBtn.style.pointerEvents = "auto";
        nextBtn.style.opacity = "1";
    }
}

// ‚úÖ Function: Handle Previous Button Click
function setupPreviousButton() {
    let prevBtn = document.getElementById("prevBtn");
    if (prevBtn) {
        prevBtn.addEventListener("click", function () {
            window.location.href = "https://concussed8.github.io/Android-App/pages/initial_management/initial_management.html";
        });
    }
}

// ‚úÖ Function: Handle Next Button Click
function setupNextButton() {
    let nextBtn = document.getElementById("nextBtn");
    if (nextBtn) {
        nextBtn.addEventListener("click", function () {
            window.location.href = "https://concussed8.github.io/Android-App/pages/modified_parkland/parkland.html";
        });
    }
}

// ‚úÖ Attach Event Listeners to Step Buttons
document.getElementById("step1").addEventListener("click", function () {
    openPopup("stepPopup1");
});
document.getElementById("step2").addEventListener("click", function () {
    openPopup("stepPopup2");
});
document.getElementById("step3").addEventListener("click", function () {
    openPopup("stepPopup3");
});
document.getElementById("step4").addEventListener("click", function () {
    openPopup("stepPopup4");
});

// ‚úÖ Attach Event Listeners to Close Buttons
document.querySelector("#stepPopup1 .close-popup").addEventListener("click", function () {
    closePopup("stepPopup1", 1);
});
document.querySelector("#stepPopup2 .close-popup").addEventListener("click", function () {
    closePopup("stepPopup2", 2);
});
document.querySelector("#stepPopup3 .close-popup").addEventListener("click", function () {
    closePopup("stepPopup3", 3);
});
document.querySelector("#stepPopup4 .close-popup").addEventListener("click", function () {
    closePopup("stepPopup4", 4);
});

// ‚úÖ Function: Restore Completion Status & Fields on Page Load
document.addEventListener("DOMContentLoaded", function () {
    updateBackgroundColor();
    updateHeaderTitle();
    disableNextButton();
    setupPreviousButton();
    setupNextButton();

    // ‚úÖ Restore checkboxes and completion status for each step
    for (let i = 1; i <= 4; i++) {
        restoreStepCheckboxes(`stepPopup${i}`);
        updateStepStatus(i);
    }

    // ‚úÖ Populate input fields from session cookies (Fields 1-7)
    populateFieldsFromCookies();
});

// ‚úÖ Listen for Orientation Changes
window.addEventListener("resize", checkOrientation);
window.addEventListener("orientationchange", checkOrientation);


   </script>

</body>
</html>
